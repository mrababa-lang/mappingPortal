
# SlashData Vehicle Portal - Backend Technical Specification

## 1. Authentication & Security
- **Mechanism**: Stateless JWT (JSON Web Token).
- **Endpoint**: `POST /api/auth/login`
- **Role Enforcement**: `ADMIN`, `MAPPING_ADMIN`, `MAPPING_USER`.

## 2. ADP Master Hub - Bulk Upload Specification
The system handles raw JSON data payloads for synchronization.

- **Endpoint**: `POST /api/adp/master/bulk-upload`
- **Consumes**: `application/json`
- **Payload**: An array of objects representing the source CSV rows.

### Backend Processing Requirements:
1. **JSON Parsing**: The backend should parse the incoming JSON array. Each object will contain keys derived from the CSV headers.

2. **Column Mapping Aliases (Normalized Keys)**:
   The backend should perform case-insensitive matching or normalization of keys:
   - `adpMakeId`: "adpmakeid", "makecode", "makeid"
   - `makeEnDesc`: "makeendesc", "descen", "makeen"
   - `makeArDesc`: "makeardesc", "descar", "makear"
   - `adpModelId`: "adpmodelid", "modelcode", "modelid"
   - `modelEnDesc`: "modelendesc", "modeldescen"
   - `modelArDesc`: "modelardesc", "modeldescar"
   - `adpTypeId`: "adptypeid", "typecode", "typeid"
   - `typeEnDesc`: "typeendesc", "typedescen"
   - `typeArDesc`: "typeardesc", "typedescar"
   - `kindCode`: "kindcode", "classificationcode"
   - `kindEnDesc`: "kindendesc", "classificationen"
   - `kindArDesc`: "kindardesc", "kinddescar", "classificationar"

3. **Upsert Strategy**:
   - **Unique Key**: Composite of (`adpMakeId`, `adpModelId`, `adpTypeId`).
   - If match found: Update descriptions and Kind/Classification fields.
   - If no match: Insert new record.

4. **Response Structure**:
   ```json
   {
     "data": {
       "recordsAdded": 1200,
       "recordsSkipped": 50,
       "errorCount": 5,
       "message": "Processed 1255 rows. 5 rows failed validation."
     }
   }
   ```

## 3. Performance Targets
- **Throughput**: 15,000 rows / 10s.
- **Memory**: The backend should efficiently handle the JSON payload (consider streaming JSON parsing if memory constraints exist).
